{% extends 'base.html' %}

{% block content %}
{% from "_formhelpers.html" import render_field %}
<div class="d-flex align-items-end mb-1 p-3" style="background-color: #F0FDF4; border: 1px solid #ccc; border-radius: 5px;">
    <img src="static/editor.png" width="106" height="101" alt="Senotype Editor" style="border: 1px solid #ccc;">
    <h2 class="m-3">Senotype Editor</h2>
</div>
<!--EDIT FORM -->
<form id="edit_form" method="post" class="mt-0 m-3 p-3">
    <!-- Senotype / Submitter -->
    <div class="row">
        <div class="col-md-6" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <div class="mb-3">
                <h4>Senotype</h4>
                <strong>{{ form.senotypeid.label }}</strong>
                <select name="{{ form.senotypeid.name }}" class="form-select" style="width: 20ch; display: inline-block;">
                    {% for value, label in form.senotypeid.choices %}
                        <option value="{{ value }}" {% if form.senotypeid.data == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
                <input type="hidden" name="original_id" value="{{ form.senotypeid.data }}">
            </div>
            <div class="mb-3">
                <strong>{{ form.senotypename.label }}</strong>
                {{ form.senotypename(class="form-control w-100", rows="2") }}
            </div>
            <div class="mb-3">
                <strong>{{ form.senotypedescription.label }}</strong>
                {{ form.senotypedescription(class="form-control w-100", rows="2") }}
            </div>
        </div>
        <div class="col-md-6" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <div class="mb-3">
                <h4>Submitter</h4>
                <strong>{{ form.submitterfirst.label }}</strong>
                {{ form.submitterfirst(class="form-control d-inline-block", style="width: 20ch; display: inline-block;") }}
                <strong class="ms-3">{{ form.submitterlast.label }}</strong>
                {{ form.submitterlast(class="form-control d-inline-block", style="width: 20ch; display: inline-block;") }}
            </div>
            <div class="mb-3">
                <strong>{{ form.submitteremail.label }}</strong>
                {{ form.submitteremail(class="form-control") }}
            </div>
        </div>
    </div>
    <!-- Taxon / Location -->
    <div class="row">
        <!-- TAXON section with remove/add buttons and modal -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.taxa.label }}</strong>
            <ul id="taxa-list" class="list-group mb-2 w-100">
                {% for taxa_field in form.taxa %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ taxa_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#taxaModal">
                +
            </button>
        </div>
        <!-- LOCATION section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.location.label }}</strong>
            <ul id="location-list" class="list-group mb-2 w-100">
                {% for location_field in form.location %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ location_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#locationModal">
                +
            </button>
        </div>
    </div>
    <!-- Cell Type / Hallmark -->
    <div class="row">
        <!-- CELL TYPE section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.celltype.label }}</strong>
            <ul id="celltype-list" class="list-group mb-2 w-100">
                {% for celltype_field in form.celltype %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ celltype_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#celltypeModal">
                +
            </button>
        </div>
        <!-- HALLMARK section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.hallmark.label }}</strong>
            <ul id="hallmark-list" class="list-group mb-2 w-100">
                {% for hallmark_field in form.hallmark %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ hallmark_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#hallmarkModal">
                +
            </button>
        </div>
    </div>
    <!-- Observable / Inducer -->
    <div class="row">
        <!-- OBSERVABLE section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.observable.label }}</strong>
            <ul id="observable-list" class="list-group mb-2 w-100">
                {% for observable_field in form.observable %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ observable_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#observableModal">
                +
            </button>
        </div>
        <!-- INDUCER section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.inducer.label }}</strong>
            <ul id="inducer-list" class="list-group mb-2 w-100">
                {% for inducer_field in form.inducer %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ inducer_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#inducerModal">
                +
            </button>
        </div>
    </div>
    <!-- Assay / Context Assertions -->
    <div class="row">
        <!-- ASSAY section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.assay.label }}</strong>
            <ul id="assay-list" class="list-group mb-2 w-100">
                {% for assay_field in form.assay %}
                    <li class="list-group-item d-flex justify-content-between align-items-center w-100">
                        {{ assay_field(class="form-control w-100") }}
                        <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeValue(this)">-</button>
                    </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#assayModal">
                +
            </button>
        </div>
        <!-- CONTEXT assertion section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <div class="container">
                <div class="row mb-3">
                    <h6 class="mb-4">Age</h6>
                    <div class="col-3 d-flex align-items-center">
                        <strong>{{ form.agevalue.label }}</strong>
                        {{ form.agevalue(class="form-control ms-2") }}
                    </div>
                    <div class="col-3 d-flex align-items-center">
                        <strong>{{ form.agelowerbound.label }}</strong>
                        {{ form.agelowerbound(class="form-control ms-2") }}
                    </div>
                    <div class="col-3 d-flex align-items-center">
                        <strong>{{ form.ageupperbound.label }}</strong>
                        {{ form.ageupperbound(class="form-control ms-2") }}
                    </div>
                    <div class="col-3 d-flex align-items-center">
                        <strong>{{ form.ageunit.label }}</strong>
                        {{ form.ageunit(class="form-control ms-2") }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- PubMed Citations/RRID origin -->
    <div class="row">
        <!-- CITATION section -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.citation.label }}</strong>
            <ul id="citation-list" class="list-group mb-2 w-100">
                {% for citation_field in form.citation %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ citation_field(class="form-control w-100") }}
                    <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeCitation(this)">-</button>
                </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#citationSearchModal">
                +
            </button>
        </div>
        <!-- ORIGIN sectno -->
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.origin.label }}</strong>
            <ul id="origin-list" class="list-group mb-2 w-100">
                {% for origin_field in form.origin %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ origin_field(class="form-control w-100") }}
                    <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeOrigin(this)">-</button>
                </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#originSearchModal">
                +
            </button>
        </div>
    </div>
    <!-- SenNet datasets -->
    <div class="row">
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.dataset.label }}</strong>
            <ul id="dataset-list" class="list-group mb-2 w-100">
                {% for dataset_field in form.dataset %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ dataset_field(class="form-control w-100") }}
                    <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeDataset(this)">-</button>
                </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#datasetSearchModal">
                +
            </button>
        </div>
        <div class="col-md-6" style="background-color: #FEF2F2; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
        </div>
    </div>
    <!-- Specified Markers/Regulating Markers -->
    <div class="row">
        <!-- SPECIFIED MARKERS  section -->
        <div class="col-md-6" style="background-color: #F0FDF4; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.marker.label }}</strong>
            <ul id="marker-list" class="list-group mb-2 w-100">
                {% for marker_field in form.marker %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ marker_field(class="form-control w-100") }}
                    <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeMarker(this)">-</button>
                </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#markerSearchModal">
                +
            </button>
            <!-- Add CSV upload button below marker list -->
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#markerCsvModal">
                Add Markers from CSV
            </button>
        </div>
        <!-- REGULATING MARKERS section -->
        <div class="col-md-6" style="background-color: #F0FDF4; border: 1px solid #ccc; border-radius: 5px; padding: 16px;">
            <strong>{{ form.regmarker.label }}</strong>
            <ul id="regmarker-list" class="list-group mb-2 w-100">
                {% for regmarker_field in form.regmarker %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ regmarker_field(class="form-control w-100") }}
                    <button type="button" class="btn btn-sm btn-danger ms-2" onclick="removeregMarker(this)">-</button>
                </li>
                {% endfor %}
            </ul>
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#regmarkerSearchModal">
                +
            </button>
            <!-- Add CSV upload button below marker list -->
            <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#regmarkerCsvModal">
                Add Markers from CSV
            </button>
        </div>
    </div>
    <!--MODAL DIVS -->
    <!-- Modal for external API search for PubMed citation-->
    <div class="modal fade" id="citationSearchModal" tabindex="-1" aria-labelledby="citationSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="citationSearchModalLabel">Search PubMed for PMID</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="citation-search-input" class="form-control" placeholder="Enter query...">
                    <div id="citation-search-results" class="mt-3">
                    <!-- Search results from API appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for external API search for RRID origin-->
    <div class="modal fade" id="originSearchModal" tabindex="-1" aria-labelledby="originSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="originSearchModalLabel">Search SciCrunch for RRID</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="origin-search-input" class="form-control" placeholder="Enter query...">
                    <div id="origin-search-results" class="mt-3">
                    <!-- Search results from API appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for external SenNet entity-api search for dataset-->
    <div class="modal fade" id="datasetSearchModal" tabindex="-1" aria-labelledby="datasetSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="datasetSearchModalLabel">Search SenNet for dataset</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="dataset-search-input" class="form-control" placeholder="Enter query...">
                    <div id="dataset-search-results" class="mt-3">
                    <!-- Search results from API appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for external ubkg-api search for specified marker-->
    <div class="modal fade" id="markerSearchModal" tabindex="-1" aria-labelledby="markerSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="markerSearchModalLabel">Search UBKG for marker</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Radio buttons for marker type -->
                    <div class="mb-3">
                        <label class="form-label">Marker type:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="marker-type" id="marker-type-gene" value="gene" checked>
                                <label class="form-check-label" for="marker-type-gene">Gene</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="marker-type" id="marker-type-protein" value="protein">
                                <label class="form-check-label" for="marker-type-protein">Protein</label>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="marker-search-input" class="form-control" placeholder="Enter query...">
                    <div id="marker-search-results" class="mt-3">
                    <!-- Search results from API appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for external ubkg-api search for regulated marker-->
    <div class="modal fade" id="regmarkerSearchModal" tabindex="-1" aria-labelledby="regmarkerSearchModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="regmarkerSearchModalLabel">Search UBKG for marker</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Radio buttons for marker type -->
                    <div class="mb-3">
                        <label class="form-label">Marker type:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="marker-type" id="regmarker-type-gene" value="gene" checked>
                                <label class="form-check-label" for="regmarker-type-gene">Gene</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="marker-type" id="regmarker-type-protein" value="protein">
                                <label class="form-check-label" for="regmarker-type-protein">Protein</label>
                            </div>
                        </div>
                    </div>
                    <!-- Radio buttons for marker action -->
                    <div class="mb-3">
                        <label class="form-label">Action:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="regmarker-action" id="regmarker-action-up" value="up_regulates" checked>
                                <label class="form-check-label" for="regmarker-action-up">up</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="regmarker-action" id="regmarker-action-down" value="down_regulates">
                                <label class="form-check-label" for="regmarker-action-down">down</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="regmarker-action" id="regmarker-action-inc" value="inconclusively_regulates">
                                <label class="form-check-label" for="regmarker-action-inc">inconclusively</label>
                            </div>
                        </div>
                    </div>
                    <input type="text" id="regmarker-search-input" class="form-control" placeholder="Enter query...">
                    <div id="regmarker-search-results" class="mt-3">
                        <!-- Search results from API appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Taxon Modal for valueset-modal.js -->
    <div class="modal fade" id="taxaModal" tabindex="-1" aria-labelledby="taxaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taxaModalLabel">Select Taxon</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="taxa-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Location Modal for valueset-modal.js -->
    <div class="modal fade" id="locationModal" tabindex="-1" aria-labelledby="locationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="locationModalLabel">Select Location</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="location-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Celltype Modal for valueset-modal.js -->
    <div class="modal fade" id="celltypeModal" tabindex="-1" aria-labelledby="celltypeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="celltypeModalLabel">Select Cell type</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="celltype-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hallmark Modal for valueset-modal.js -->
    <div class="modal fade" id="hallmarkModal" tabindex="-1" aria-labelledby="hallmarkModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="hallmarkModalLabel">Select Hallmark</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="hallmark-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Observable Modal for valueset-modal.js -->
    <div class="modal fade" id="observableModal" tabindex="-1" aria-labelledby="observableModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="observableModalLabel">Select Observable</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="observable-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Inducer Modal for valueset-modal.js -->
    <div class="modal fade" id="inducerModal" tabindex="-1" aria-labelledby="inducerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="inducerModalLabel">Select Inducer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="inducer-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Assay Modal for valueset-modal.js -->
    <div class="modal fade" id="assayModal" tabindex="-1" aria-labelledby="assayModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="assayModalLabel">Select Assay</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="assay-modal-list" class="list-group"></div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- UPDATE FORM below edit_form -->
<form id="update_form" method="post" action="/update" class="my-4">
    <div class="d-flex justify-content-center">
        <button id="update_btn" type="submit" class="btn btn-primary">Update</button>
    </div>
</form>
<!-- CSV UPLOAD CSV MODAL FORMS -->
<!-- Modal div with form to upload CSV of specified markers. Placed here so that form will not be transprent. -->
<div class="modal fade" id="markerCsvModal" tabindex="-1" aria-labelledby="markerCsvModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="marker-csv-form" class="modal-content" enctype="multipart/form-data">
            <div class="modal-header">
                <h5 class="modal-title" id="markerCsvModalLabel">Upload Marker CSV</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Please upload a CSV file with <strong>type</strong> and <strong>id</strong> columns.
                    <ul>
                        <li>
                            <small>
                                <strong>type</strong> must be <code>gene</code> or <code>protein</code>.
                            </small>
                        </li>
                        <li>
                            <small>
                                A gene <strong>id</strong> must correspond to a HGNC symbol--e.g., <code>BRCA1</code>.
                            </small>
                        </li>
                        <li>
                            <small>
                                A protein <strong>id</strong> must correspond to a UniProtKB ID--e.g., <code>Q13201</code>.
                            </small>
                        </li>
                    </ul>
                    <input type="file" class="form-control mb-2" id="marker-csv-file" accept=".csv" required>
                    <div id="csv-validation-results" class="mt-2 small">
                    </div>
            </div>
            <div class="modal-footer">
                <button type="submit" id="marker-csv-submit" class="btn btn-primary" disabled>Add specified markers</button>
            </div>
        </form>
    </div>
</div>
<!-- Modal div with form to upload CSV of regulating markers. Placed here so that form will not be transprent. -->
<div class="modal fade" id="regmarkerCsvModal" tabindex="-1" aria-labelledby="regmarkerCsvModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="regmarker-csv-form" class="modal-content" enctype="multipart/form-data">
            <div class="modal-header">
                <h5 class="modal-title" id="regmarkerCsvModalLabel">Upload Marker CSV</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Please upload a CSV file with <strong>type</strong>, <strong>id</strong>, and <strong>action</strong> columns.
                    <br>
                    <ul>
                        <li>
                            <small>
                                <strong>type</strong> must be <code>gene</code> or <code>protein</code>.
                            </small>
                        </li>
                        <li>
                            <small>
                                A gene <strong>id</strong> must correspond to a HGNC symbol--e.g., <code>BRCA1</code>.
                            </small>
                        </li>
                        <li>
                            <small>
                                A protein <strong>id</strong> must correspond to a UniProtKB ID--e.g., <code>Q13201</code>.
                            </small>
                        </li>
                        <li>
                            <small>
                                The <strong>action</strong> must be one of the following:
                            </small>
                            <ul>
                                <li>
                                    <small>
                                        <code>1</code> for <i>upregulation</i>
                                    </small>
                                </li>
                                <li>
                                    <small>
                                        <code>-1</code> for <i>downregulation</i>
                                    </small>
                                </li>
                                <li>
                                    <small>
                                        <code>0</code> for <i>inconclusive regulation</i>
                                    </small>
                                </li>
                            </ul>
                        </li>
                    </ul>
                     <br>
                    <br>
                     <input type="file" class="form-control mb-2" id="regmarker-csv-file" accept=".csv" required>
                    <div id="regcsv-validation-results" class="mt-2 small">
                    </div>
            </div>
            <div class="modal-footer">
                <button type="submit" id="regmarker-csv-submit" class="btn btn-primary" disabled>Add regulating markers</button>
            </div>
        </form>
    </div>
</div>
<script src="{{ url_for('static', filename='citation-modal.js') }}"></script>
<script src="{{ url_for('static', filename='origin-modal.js') }}"></script>
<script src="{{ url_for('static', filename='dataset-modal.js') }}"></script>
<script src="{{ url_for('static', filename='marker-modal.js') }}"></script>
<script src="{{ url_for('static', filename='marker-csv.js') }}"></script>
<script src="{{ url_for('static', filename='regmarker-modal.js') }}"></script>
<script src="{{ url_for('static', filename='regmarker-csv.js') }}"></script>
<script src="{{ url_for('static', filename='valueset-modal.js') }}"></script>
<script src="{{ url_for('static', filename='id-dropdown-post.js') }}"></script>
<script src="{{ url_for('static', filename='update-button.js') }}"></script>

{% endblock %}